<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>재고 관리</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: auto; padding: 20px; }
        h1 { text-align: center; }
        .stock-table { 
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }
        .stock-table th, .stock-table td {
            border: 1px solid #ccc;
            padding: 10px;
        }
        .stock-table th {
            background-color: #f2f2f2;
        }
        .stock-table input {
            width: 80px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>재고 관리</h1>
    <p><a href="index.html">계산기 페이지로 돌아가기</a></p>
    
    <table class="stock-table">
        <thead>
            <tr>
                <th>물품명</th>
                <th>전체 재고</th>
                <th>재고 추가</th>
                <th>재고 감모</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>물품 1</td>
                <td><input type="number" id="stock1" min="0"> 개</td>
                <td><input type="number" id="add1" value="" min="0"> 개</td>
                <td><input type="number" id="subtract1" value="" min="0"> 개</td>
            </tr>
            <tr>
                <td>물품 2</td>
                <td><input type="number" id="stock2" min="0"> 개</td>
                <td><input type="number" id="add2" value="" min="0"> 개</td>
                <td><input type="number" id="subtract2" value="" min="0"> 개</td>
            </tr>
            <tr>
                <td>물품 3</td>
                <td><input type="number" id="stock3" min="0"> 개</td>
                <td><input type="number" id="add3" value="" min="0"> 개</td>
                <td><input type="number" id="subtract3" value="" min="0"> 개</td>
            </tr>
        </tbody>
    </table>

    <button id="save-stock-button">재고 저장</button>

    <script>
        function loadStock() {
            const savedStock = localStorage.getItem('stockLevels');
            if (savedStock) {
                const stock = JSON.parse(savedStock);
                document.getElementById('stock1').value = stock.item1;
                document.getElementById('stock2').value = stock.item2;
                document.getElementById('stock3').value = stock.item3;
            } else {
                const initialStock = { item1: 50, item2: 30, item3: 10 };
                localStorage.setItem('stockLevels', JSON.stringify(initialStock));
                loadStock();
            }
        }

        function saveStock() {
            let stock1 = parseInt(document.getElementById('stock1').value) || 0;
            let stock2 = parseInt(document.getElementById('stock2').value) || 0;
            let stock3 = parseInt(document.getElementById('stock3').value) || 0;
            
            const add1 = parseInt(document.getElementById('add1').value) || 0;
            const subtract1 = parseInt(document.getElementById('subtract1').value) || 0;
            const add2 = parseInt(document.getElementById('add2').value) || 0;
            const subtract2 = parseInt(document.getElementById('subtract2').value) || 0;
            const add3 = parseInt(document.getElementById('add3').value) || 0;
            const subtract3 = parseInt(document.getElementById('subtract3').value) || 0;

            stock1 = stock1 + add1 - subtract1;
            stock2 = stock2 + add2 - subtract2;
            stock3 = stock3 + add3 - subtract3;

            const stock = {
                item1: stock1,
                item2: stock2,
                item3: stock3
            };
            
            localStorage.setItem('stockLevels', JSON.stringify(stock));
            alert('재고가 저장되었습니다!');
            
            // 저장 후 추가/감모 입력칸 초기화 및 재고 업데이트
            document.getElementById('add1').value = '';
            document.getElementById('subtract1').value = '';
            document.getElementById('add2').value = '';
            document.getElementById('subtract2').value = '';
            document.getElementById('add3').value = '';
            document.getElementById('subtract3').value = '';
            loadStock();
        }

        function handleKeyDown(event) {
            if (event.key === 'Enter' || event.keyCode === 13) {
                saveStock();
            }
        }
        
        // 모든 입력 필드에 keydown 이벤트 리스너를 추가합니다.
        document.getElementById('stock1').addEventListener('keydown', handleKeyDown);
        document.getElementById('add1').addEventListener('keydown', handleKeyDown);
        document.getElementById('subtract1').addEventListener('keydown', handleKeyDown);
        document.getElementById('stock2').addEventListener('keydown', handleKeyDown);
        document.getElementById('add2').addEventListener('keydown', handleKeyDown);
        document.getElementById('subtract2').addEventListener('keydown', handleKeyDown);
        document.getElementById('stock3').addEventListener('keydown', handleKeyDown);
        document.getElementById('add3').addEventListener('keydown', handleKeyDown);
        document.getElementById('subtract3').addEventListener('keydown', handleKeyDown);

        document.getElementById('save-stock-button').addEventListener('click', saveStock);
        window.addEventListener('DOMContentLoaded', loadStock);
    </script>
</body>
</html>
